#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/floss'
require 'optparse'

module Cli
  attr_accessor :action, :verbose

  OptionParser.new do |parser|
    parser.banner = 'Easily manage floss repositories.'

    parser.on('-v', '--verbose', 'More information') do
      @verbose = true
    end

    parser.on('-i', '--info', 'Floss current version') do
      @action = :version
    end

    parser.on('-g', '--grab', 'Grab floss projects') do
      @action = :grab
    end

    parser.on('-a', '--archive', 'Archive Floss projects') do
      @action = :archive
    end

    parser.on('-a', '--archive', 'Archive Floss projects') do
      @action = :archive
    end
  end.parse!

  def self.start
    Floss::Main.new(@action, @verbose).run
  end
end

Cli.start
